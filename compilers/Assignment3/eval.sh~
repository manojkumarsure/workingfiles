for i in minijava/*.java;
do
#echo $i;
	java P3 < $i > tempfile;
	java -jar pgi.jar < tempfile > tmpoutput;
	cd minijava/;
	j=`echo $i | sed 's/\([^\/]*\/\)\(.*\)/\2/'`;
	javac $j;
	class=`echo $j | sed 's/\([^\.]*\)\(.java\)/\1/'`;
#echo $class;
	java  $class> ../tmpoutput2;
	cd ../;
	diff tmpoutput2 tmpoutput > /dev/null;
	if [ $? -eq 0 ]
		then
		echo "Successful"
		else
		echo $j;
		echo "Failed"
	fi
	rm tmpoutput tmpoutput2
done
